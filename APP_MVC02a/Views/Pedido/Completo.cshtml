@model APP_MVC02a.Models.pedido

@{
    ViewBag.Title = "Completo";
    Layout = "~/Views/Shared/_Tienda_Layout.cshtml";
    var imagePago = @Model.TIPO_PAGO.descrip + ".png";
}


<script src="~/js/jspdf.debug.js"></script>


    <style>
.efecto1{
                -moz-box-shadow: 0 0px 5px #555555;
                -webkit-box-shadow: 0 0px 5px #555555;
                box-shadow: 0 0px 5px #555555;
}
</style>
											
<div style="background-color: #FFF;" class="efecto1">
<div  style="background-color: #FFF;width: 1100px;margin-left: 35px;">
											
<!-- Breadcrumb -->

<!-- /Breadcrumb -->

										<div id="slider_row" class="row">
						<div id="top_column" class="center_column col-xs-12 col-sm-12"></div>
					</div>
					<div class="row">
																		<div id="center_column" class="center_column col-xs-12 col-sm-12">
	

<h1 id="cart_title" class="page-heading">Registro de Pedido
		
	</h1>






<!-- Steps -->
<ul class="step clearfix" id="order_step">
	<li class="step_todo  first">
					<span><em>01.</em> Resumen</span>
			</li>
	<li class="step_todo second">
					<span><em>02.</em> Iniciar sesión</span>
			</li>
	<li class="step_todo third">
					<span><em>03.</em> Pedido</span>
			</li>
    <li class="step_todo four">
					<span><em>04.</em> Pago</span>
			</li>
	<li class="step_current four">
					<span><em>05.</em> Completo</span>
			</li>

</ul>
<!-- /Steps -->

<form action="Pedido" method="post" id="account-creation_form" class="std box">
 
			<h3 class="page-subheading">Completo</h3>
     <div class="account_creation" align="center">
         <div class="alert alert-success" role="alert">
             Su pedido a sido generado con exito!
         </div>
         Usted realizara el pago mediante @Model.tipo_compPago.descrip con:
         <div class="alert alert-warning" style="width:400px;color:#FFF" role="alert"><h3>N° Orden: @Model.idpedido</h3></div>
    <button onclick="javascript:generaPDF()" type="button" class="btn btn-default btn-lg">
  <span class="glyphicon glyphicon-star" aria-hidden="true"></span> Descargar PDF
</button>
         <div class="progress">
  <div id="progress" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
    0%
  </div>
</div>
      </div>
</form>
	
					</div><!-- #center_column -->
										</div><!-- .row -->
				
</div></div>

<table id="xptContentMain" style="display:none;">
        <tr><td>
            <span style="float:left"><img alt="tortas" src="~/imagenes/logoFinal.fw.png"  height="90px" width="200px" ></span>
            <span style="float:right"><img alt="tortas" src="~/imagenes/@imagePago"  height="40px" width="200px" ></span>

            </td>

            <td align="right">Nro de Orden: @Model.idpedido</td></tr>
            <tr><td><h3>PERSONA DE CONTACTO</h3></td></tr>

                                                                    <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Nombre:</strong></span>
                                                                         <span>@Model.contacto_nom</span>																	
																	</div>																	
																	</td>

                                                                  

																	</tr>

                                                                    <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Apellidos:</strong></span>
                                                                        <span>@Model.contacto_ape</span>																	
																	</div>																	
																	</td>

                                                               
																	</tr>
                                                                    <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Email:</strong></span>
                                                                        <span>@Model.contacto_mail</span>																	
																	</div>																	
																	</td>


																	</tr>

                                                                      <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Telefono Celular:</strong></span>		
                                                                        <span>@Model.contacto_movil</span>															
																	</div>																	
																	</td>

                                                                    

																	</tr>
        <tr><td><h3>Datos del Pedido</h3></td></tr>
                                                                    <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Tipo de Entrega:</strong></span>		
                                                                        <span>@Model.tipoentrega</span>																
																	</div>																	
																	</td>

                                                                   

																	</tr>
                                                              <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Fecha de Entrega:</strong></span>	
                                                                        <span>@Model.fechaentrega</span>																	
																	</div>																	
																	</td>


																	</tr>
                                                             <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Fecha del Pedido:</strong></span>	
                                                                        <span>@Model.fechaPedido</span>																	
																	</div>																	
																	</td>


																	</tr>
                                                              <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Comprobante de Pago:</strong></span>		
                                                                        <span>@Model.tipo_compPago.descrip</span>																	
																	</div>																	
																	</td>

                                                                
																	</tr>
                                                                <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Medio de Pago:</strong></span>		
                                                                        <span>@Model.TIPO_PAGO.descrip</span>																	
																	</div>																	
																	</td>

                                                                
																	</tr>
                                                              <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>RUC:</strong></span>	
                                                                        <span>@Model.ruc</span>																		
																	</div>																	
																	</td>

                                                                   

																	</tr>
                                                              <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Razon Social:</strong></span>		
                                                                        <span>@Model.razonsocial</span>																	
																	</div>																	
																	</td>

                                                                   
																	</tr>
        <tr><td><h3>Direccion de Entrega</h3></td></tr>
                                                                    <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Direccion:</strong></span>		
                                                                        <span>@Model.entrega_dir</span>																
																	</div>																	

																	</tr>
                                                                    <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Urbanizacion:</strong></span>		
                                                                        <span>@Model.entrega_urba</span>																
																	</div>	
                                                                        </td>																

																	</tr>
                                                                    <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Distrito:</strong></span>		
                                                                        <span>Los @Model.distrito.descrip</span>																
																	</div>		
                                                                        </td>															

																	</tr>
                                                                   <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>Referencia:</strong></span>		
                                                                        <span>@Model.entrega_ref</span>																
																	</div>	
                                                                        </td>																

																	</tr>
        <tr><td><h3>Detalle del Pedido</h3></td></tr>

                                                                    <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>SubTotal: </strong></span>		
                                                                        <span> @Model.subTotal</span>																
																	</div>		
                                                                        </td>															

																	</tr>
                                                                      <tr>
                                                                          <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>IGV:</strong></span>		
                                                                        <span> @Model.igv</span>																
																	</div>		
                                                                        </td>															

																	</tr>
                                                                    <tr>

																	<td style="overflow:hidden;">
																	<div class="tituloResolucion" style="margin-left:15px; text-align: justify;">
																	<span><strong>TOTAL:</strong></span>		
                                                                        <span> @Model.totalpedido</span>																
																	</div>		
                                                                        </td>															

																	</tr>
                                                                      <tr>          
																	<td style="overflow:hidden;">
																	    
                                                                        <table>
                                                                            <tr>
                                                                                <td>
                                                                                    Producto
                                                                                </td>
                                                                                <td>
                                                                                    Precio
                                                                                </td>
                                                                                <td>
                                                                                    Cantidad
                                                                                </td>
                                                                                <td>
                                                                                    Total
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td>
                                                                                    Torta tres leches
                                                                                </td>
                                                                                <td>
                                                                                    12.4
                                                                                </td>
                                                                                <td>
                                                                                    6
                                                                                </td>
                                                                                <td>
                                                                                    12.4
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                            	
                                                                     </td>															

																	</tr>



        
    </table>


<script type="text/javascript">

    function generaPDF() {
       
        var pdf = new jsPDF('p', 'pt', 'letter');
        // source can be HTML-formatted string, or a reference
        // to an actual DOM element from which the text will be scraped.
        source = $('#xptContentMain')[0];
        cambiaBarraProgress('30%')
        // we support special element handlers. Register them with jQuery-style 
        // ID selector for either ID or node name. ("#iAmID", "div", "span" etc.)
        // There is no support for any other type of selectors 
        // (class, of compound) at this time.
        specialElementHandlers = {
            // element with id of "bypass" - jQuery style selector
            '#bypassme': function (element, renderer) {
                // true = "handled elsewhere, bypass text extraction"
                return true
            }
        };
        cambiaBarraProgress('60%')
        margins = {
            top: 40,
            bottom: 60,
            left: 40,
            width: 522
        };
        // all coords and widths are in jsPDF instance's declared units
        // 'inches' in this case
        cambiaBarraProgress('80%')
        pdf.fromHTML(
                source, // HTML string or DOM elem ref.
                margins.left, // x coord
                margins.top, {// y coord
                    'width': margins.width, // max width of content on PDF
                    'elementHandlers': specialElementHandlers
                },

        function (dispose) {
            // dispose: object with X, Y of the last line add to the PDF 
            //          this allow the insertion of new lines after html               

            pdf.save("miPDF");
            
        }
        , margins);
        cambiaBarraProgress('100%')
    }

    function cambiaBarraProgress(Porcentaje) {
        document.getElementById("progress").style.width = Porcentaje;
        document.getElementById("progress").innerHTML = Porcentaje;
    }
</script>